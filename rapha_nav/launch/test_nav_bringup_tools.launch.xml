<launch>

  <include file="$(find-pkg-share rapha_nav)/launch/ekf.launch.xml" />
  <include file="$(find-pkg-share rapha_description)/launch/state_publisher.launch.xml" />
  <!--<include file="$(find-pkg-share rapha_oak)/launch/pointcloud.launch.py" />-->

  <node name="vel_to_ackermann_converter" pkg="rapha_nav" exec="cmd_vel_to_ackermann_drive" >
    <param name="wheelbase" value="0.31"/>
  </node>

  <node name="trajectory_path" pkg="rapha_nav" exec="trajectory_path" >
    <param name="frame_id" value="odom"/>
  </node>

  <node name="static_tf_publisher" pkg="tf2_ros" exec="static_transform_publisher" args="0 0 0.15 3.14159 0 0 oak_base_link laser_link"/>

  <node name="rplidar_node" pkg="rplidar_ros" exec="rplidar_composition">
    <param name="frame_id" value="laser_link" />
    <param name="angle_compensate" value="true" />
  </node>

  <node name="slam_toolbox_node" pkg="slam_toolbox" exec="async_slam_toolbox_node">
    <param name="minimum_travel_distance" value="0.3" />
    <param name="minimum_travel_heading" value="0.3" />
    <param name="map_update_interval" value="1.0" />
    <param name="loop_search_maximum_distance" value="0.5" />
    <param name="enable_interactive_mode" value="false" />
    <param name="max_laser_range" value="12.0" />
  </node>
  <!--
  <node name="static_tf_publisher" pkg="tf2_ros" exec="static_transform_publisher" args="0 0 0 0 0 0 map odom"/>

  
  <node name="pointcloud_to_laserscan" pkg="pointcloud_to_laserscan" exec="pointcloud_to_laserscan_node" >
    <param name="target_frame" value="base_link" />
    <remap from="cloud_in" to="/oak/points"/>
    <remap from="scan" to="/scan"/>
  </node>
  -->
</launch>
