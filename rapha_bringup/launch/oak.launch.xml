<launch version="0.1.1">

  <node_container namespace=""
    name="oak_container"
    pkg="rclcpp_components"
    exec="component_container_isolated">
    <composable_node namespace=""
      name="oak"
      pkg="depthai_ros_driver"
      plugin="depthai_ros_driver::Camera">
      <extra_arg name="use_intra_process_comms" value="true" />
      <param from="$(find-pkg-share rapha_bringup)/config/oak.yaml" />
    </composable_node>
    <composable_node namespace="oak"
      name="point_cloud_xyz"
      pkg="depth_image_proc"
      plugin="depth_image_proc::PointCloudXyzNode">
      <extra_arg name="use_intra_process_comms" value="true" />
      <remap from="image_rect" to="stereo/image_raw" />
      <remap from="camera_info" to="stereo/camera_info" />
    </composable_node>
  </node_container>

</launch>